"use strict";(self.webpackChunkcontrols_visualizer=self.webpackChunkcontrols_visualizer||[]).push([[230],{2505:function(e,t){var n=function(){function e(e,t,n,a,s,r,i,l){this.speed=0,this.phi=0,this.max_steer=.5,this.max_speed=50,this.theta_dot=0,this.loc=l.createVector(e,t),this.vel=l.createVector(1,1),this.theta=n,this.p5=l,this.car_len=s,this.car_wid=this.car_len/2.5,this.tyre_wid=this.car_wid/7,this.tyre_len=this.car_len/6.6,this.color=r,this.car_ref=i,this.phi=a,this.shouldDrawImpossibleRegion=!1}var t=e.prototype;return t.run=function(){this.display(),this.move(),this.car_ref&&(this.car_ref.current={x:this.loc.x,y:this.loc.y,theta:this.theta,phi:this.phi})},t.display=function(){this.p5.push(),this.p5.translate(this.loc.x,this.loc.y),this.p5.rotate(this.theta),this.draw_car_body(),this.draw_front_wheels(),this.p5.pop()},t.draw_car_body=function(){this.shouldDrawImpossibleRegion&&this.drawImpossibleRegion(),this.p5.stroke(0),this.p5.strokeWeight(2),this.p5.fill(this.color);var e=-this.car_len/2,t=-this.car_wid/2;this.p5.rect(e,t,this.car_len,this.car_wid,10),this.p5.fill(0),this.p5.noStroke();var n=-this.car_len/2+this.tyre_len/3,a=-this.car_wid/2+.5*this.tyre_wid,s=this.car_wid/2-1.5*this.tyre_wid;this.p5.rect(n,a,this.tyre_len,this.tyre_wid,5),this.p5.rect(n,s,this.tyre_len,this.tyre_wid,5)},t.draw_front_wheels=function(){this.p5.noStroke(),this.p5.fill(0);var e=this.car_len/2-this.tyre_len/2-this.tyre_len/3,t=-this.car_wid/2+this.tyre_wid,n=this.car_wid/2-this.tyre_wid;this.p5.push(),this.p5.translate(e,t),this.p5.rotate(this.phi),this.p5.rect(-this.tyre_len/2,-this.tyre_wid/2,this.tyre_len,this.tyre_wid,5),this.p5.pop(),this.p5.push(),this.p5.translate(e,n),this.p5.rotate(this.phi),this.p5.rect(-this.tyre_len/2,-this.tyre_wid/2,this.tyre_len,this.tyre_wid,5),this.p5.pop(),this.p5.push(),this.p5.stroke(220),this.p5.strokeWeight(1),this.p5.fill(180),this.p5.rotate(-this.p5.PI/2),this.p5.line(0,0,0,this.car_len/2),this.p5.translate(0,this.car_len/2),this.p5.triangle(-5,0,0,5,5,0),this.p5.pop()},t.steer=function(e){e>this.max_steer?this.phi=this.max_steer:e<-this.max_steer?this.phi=-this.max_steer:this.phi=e},t.setSpeed=function(e){e>this.max_speed?this.speed=this.max_speed:e<-this.max_speed?this.speed=-this.max_spee:this.speed=e},t.move=function(){this.vel.x=this.speed*Math.cos(this.theta),this.vel.y=this.speed*Math.sin(this.theta),this.theta_dot=this.speed*Math.tan(this.phi)/this.car_len,this.theta+=this.theta_dot,this.loc.add(this.vel)},t.dont_crash=function(){this.loc.x<2*-this.car_len&&(this.loc.x=0,this.speed=0),this.loc.x>800&&(this.loc.x=600,this.speed=0),this.loc.y<-50&&(this.loc.y=0,this.speed=0),this.loc.y>700&&(this.loc.y=600,this.speed=0)},t.track=function(e,t,n){null!=n&&null!=n||(n=10);for(var a=0;a<20;a++){var s=e-this.loc.x,r=t-this.loc.y,i=this.p5.createVector(this.p5.cos(this.theta),this.p5.sin(this.theta)),l=this.p5.createVector(s,r).normalize(),c=i.angleBetween(l);this.phi=c>0?this.max_steer:c<0?-this.max_steer:0,this.speed=.1,this.move()}},t.drawImpossibleRegion=function(){this.p5.noFill(),this.p5.stroke("red");var e=this.car_len/this.p5.tan(this.max_steer);this.p5.circle(0,e,2*e),this.p5.circle(0,-e,2*e)},t.getCarState=function(){return{x:this.loc.x,y:this.loc.y,theta:this.theta}},e}();t.Z=n},4995:function(e,t,n){n.d(t,{Z:function(){return a}});var a=function(){function e(e,t,n){this.car=e,this.p5=n,this.controlIndex=0,this.sketchState=t,this.currentSteer=0,this.currentPathIndex=0,this.paths=null,this.reachedGoal=!1,this.pidWayPointIndex=0,this.pidDubinsWayPointIndex=0,this.waypoints=[],this.waypointsIndex=0}var t=e.prototype;return t.step=function(){if(this.paths){if(this.currentPathIndex>this.paths.length-1)return this.car.display(),this.car.setSpeed(0),this.car.steer(0),void(this.reachedGoal=!0);0===this.currentPathIndex&&0===this.controlIndex&&this.setSteeringForNewPath(this.paths[this.currentPathIndex]);var e=this.paths[this.currentPathIndex];if(this.controlIndex==Math.floor(e.numSteps)){var t=this.sketchState.carSpeed*(e.numSteps-this.controlIndex);this.car.setSpeed(t),this.car.steer(this.currentSteer),this.controlIndex++}else this.controlIndex<Math.floor(e.numSteps)?(this.car.setSpeed(this.sketchState.carSpeed),this.car.steer(this.currentSteer),this.controlIndex++):(this.controlIndex=0,this.currentPathIndex++,this.setSteeringForNewPath(this.paths[this.currentPathIndex]));this.car.run()}else this.car.display()},t.setPaths=function(e){this.paths=e},t.setSteeringForNewPath=function(e){if(e){var t=0;"LEFT"===e.direction?t=this.car.max_steer:"RIGHT"===e.direction?t=-this.car.max_steer:"STRAIGHT"===e.direction&&(t=0),this.currentSteer=t}},t.dist=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},t.pidTrackPoseWayPoints=function(){if(this.pidWayPointIndex>=this.sketchState.poseWayPoints.length)return this.car.display(),this.car.setSpeed(0),this.car.steer(0),void(this.reachedGoal=!0);var e=this.sketchState.poseWayPoints[this.pidWayPointIndex];this.car.track(e.x,e.y,5),this.dist(e,this.car.loc)<=5&&this.pidWayPointIndex++,this.car.run()},t.pidTrackDubinsWayPoints=function(){if(this.pidDubinsWayPointIndex>=this.sketchState.positionWayPoints.length)return this.car.display(),this.car.setSpeed(0),this.car.steer(0),void(this.reachedGoal=!0);var e=this.sketchState.positionWayPoints[this.pidDubinsWayPointIndex];this.car.track(e.x,e.y,2),this.dist(e,this.car.loc)<=2&&this.pidDubinsWayPointIndex++,this.car.run()},t.pidTrackPositionWayPoints=function(e){if(this.waypointsIndex>=e.length)return this.car.display(),this.car.setSpeed(0),this.car.steer(0),void(this.reachedGoal=!0);var t=e[this.waypointsIndex];this.car.track(t.x,t.y,10),this.dist(t,this.car.loc)<=10&&this.waypointsIndex++,this.car.run()},e}()},6678:function(e,t,n){n.r(t),n.d(t,{default:function(){return ge}});var a=n(5861),s=n(7757),r=n.n(s),i=n(7294),l=n(6633),c=n.n(l),o=n(5785);function u(e){var t=e.text,n=e.isSelected,a=e.setState,s=e.index;return i.createElement("div",{onClick:function(){a((function(e){return{selectedIndex:s,values:(t=s,n=e.values,a=(0,o.Z)(n),a.forEach((function(e){return e.isSelected=!1})),a[t].isSelected=!0,a)};var t,n,a}))},className:(n?"bg-[#d5d5d5] hover:bg-[#d5d5d5] text-black":"bg-[#747474] hover:bg-[#3e3e3f]")+" text-xs sm:text-base lg:text-lg px-2 lg:px-8 mx-1 lg:mx-3 py-1 lg:py-2 rounded-xl cursor-pointer flex items-center justify-center text-center"},t)}function h(e){var t=e.tabValues,n=e.setTabValues;return i.createElement("div",{className:"flex sm:justify-center w-full overflow-x-auto py-1"},t.values.map((function(e,t){return i.createElement(u,{key:t,text:e.text,isSelected:e.isSelected,setState:n,index:t})})))}var d=n(2318),m=n.n(d),p=n(2505);function f(){return i.createElement("div",{className:"flex flex-col"},i.createElement("div",null,i.createElement("h1",{className:"text-5xl font-bold text-gray-800 p-6"},"Welcome! ðŸ‘€")),i.createElement("div",null,i.createElement("h2",{className:"text-xl text-gray-800 p-6"},"Use the ",i.createElement("span",{className:"font-bold underline"},"WASD")," keys to drive the car around! You are driving a ",i.createElement("a",{href:"http://planning.cs.uiuc.edu/node658.html",target:"_blank",className:"text-blue-600 "},"Dubin's Car ðŸš—"),"!")),i.createElement("div",null,i.createElement("h2",{className:"text-xl text-gray-800 p-6"},i.createElement("span",{className:"font-bold underline"},'Press "T"')," to see the car's turning circles. The dynamics of this car are fully defined, which makes it easier to drive autonomously.")),i.createElement("div",null,i.createElement("h2",{className:"text-xl text-gray-800 p-6"},"When you're ready, click on the next tab to play with control algorithms. If you'd like to learn more about anything we show on this website, please look at our documentation.")))}function g(){var e=(0,i.useState)({width:300,height:300}),t=e[0],n=e[1];return(0,i.useEffect)((function(){function e(){var e=window.innerWidth,t=window.innerHeight;n({width:e<1024?.8*e-25:e/2-100,height:e<1024?.5*t:t-300})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}var x={canvasWidth:800,canvasHeight:800};function v(){var e=(0,i.useState)(x),t=e[0],n=e[1],a=g();(0,i.useEffect)((function(){var e=a.width,t=a.height;n((function(n){return Object.assign({},n,{canvasWidth:e,canvasHeight:t})}))}),[a]);var s=(0,i.useRef)();return(0,i.useEffect)((function(){var e=new(m())(function(e){return function(t){var n=e.canvasWidth,a=e.canvasHeight,s=(t.color(0,255,0),t.color(0,50,255),t.color(255,50,10),Math.max(30,a/9)),r=Math.max(30,n/9),i=Math.min(s,r),l=new p.Z(n/2,a/2,0,0,i,"red",null,t);t.setup=function(){t.createCanvas(n,a),t.background("#747474")},t.draw=function(){t.background("#747474"),t.translate(0,a),t.scale(1,-1),l.run()},t.keyPressed=function(){t.keyCode===t.UP_ARROW||"w"===t.key?l.setSpeed(3):t.keyCode===t.DOWN_ARROW||"s"===t.key?l.setSpeed(0):t.keyCode===t.LEFT_ARROW||"a"===t.key?l.steer(l.phi+l.max_steer):t.keyCode===t.RIGHT_ARROW||"d"===t.key?l.steer(l.phi-l.max_steer):"t"===t.key&&(l.shouldDrawImpossibleRegion=!l.shouldDrawImpossibleRegion)}}}(t),s.current);return function(){e.remove()}})),i.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 "},i.createElement(f,null),i.createElement("div",{className:"cursor-pointer p-6",ref:s,style:{width:t.canvasWidth,height:t.canvasHeight}}))}var b=n(4918),y=n(4995);function E(e,t,n){return function(a){var s=e.canvasWidth,r=e.canvasHeight,i=(a.color(0,255,0),a.color(0,50,255),a.color(255,50,10),new p.Z(n.current.x,n.current.y,n.current.theta,n.current.phi,e.carLength,e.carColor,n,a));i.setSpeed(0);var l=new y.Z(i,e,a);function c(){a.fill("#baff29"),a.noStroke(),e.positionWayPoints.forEach((function(t){var n,s,r;a.circle(t.x,t.y,.5*e.carLength),n=t.index,s=t.x-.05*e.carLength,r=t.y-.01*e.carLength,a.push(),a.scale(1,-1),a.textSize(12),a.fill(0),a.text(n,s,-r),a.pop()}))}function u(){var n={x:a.mouseX,y:r-a.mouseY,index:e.positionWayPoints.length+1};t((function(e){return Object.assign({},e,{positionWayPoints:[].concat((0,o.Z)(e.positionWayPoints),[n])})}))}a.setup=function(){a.createCanvas(s,r).mousePressed(u),a.background("#747474")},a.draw=function(){a.background("#747474"),a.translate(0,r),a.scale(1,-1),c(),e&&e.positionWayPoints&&"pid"==e.controlMode?l.pidTrackPositionWayPoints(e.positionWayPoints):i.run(),l.reachedGoal&&t((function(e){return Object.assign({},e,{controlMode:null})}))},a.keyPressed=function(){a.keyCode===a.UP_ARROW||"w"===a.key?i.setSpeed(3):a.keyCode===a.DOWN_ARROW||"s"===a.key?i.setSpeed(0):a.keyCode===a.LEFT_ARROW||"a"===a.key?i.steer(i.phi+i.max_steer):a.keyCode===a.RIGHT_ARROW||"d"===a.key?i.steer(i.phi-i.max_steer):"t"===a.key&&(i.shouldDrawImpossibleRegion=!i.shouldDrawImpossibleRegion)}}}var k={carLength:50,carSpeed:1,carColor:"#ff0000",positionWayPoints:[],canvasWidth:600,canvasHeight:600,controlMode:null};function w(){var e=(0,i.useState)(k),t=e[0],n=e[1],a=g(),s=(0,i.useRef)(),r=(0,i.useRef)({x:t.canvasWidth/2,y:t.canvasHeight/2,theta:0,phi:0});return(0,i.useEffect)((function(){var e=a.width,t=a.height;n((function(n){return Object.assign({},n,{canvasWidth:e,canvasHeight:t})}))}),[a]),(0,i.useEffect)((function(){var e=new(m())(E(t,n,r),s.current);return function(){e.remove()}}),[t]),i.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 "},i.createElement("div",{className:" flex flex-col items-center"},i.createElement("div",{className:"flex flex-col"},i.createElement("div",null,i.createElement("h1",{className:"text-5xl font-bold text-gray-800 p-6"},"Bang Bang Controls")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},i.createElement("span",{className:"font-bold underline"},"Click on the screen")," to set target points.")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},"We want the car to hit each of these points autonomously. We implemented three ways of doing this, which you can select from the drop-down menu above. When you've set the points you want and click the ",i.createElement("span",{className:"font-bold underline"}," track waypoints ")," button below.")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},"What do you notice? Can you find situations where the car cannot hit one of the points? (Hint: use the ",i.createElement("span",{className:"font-bold underline"},'"T" button')," and see what happens when you put a point inside a turning cirlce!)."))),i.createElement("div",{className:"flex space-x-3"},i.createElement("button",{className:"bg-blue-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-blue-400 hover:ring hover:ring-blue-400 disabled:hover:ring-0 disabled:cursor-not-allowed",disabled:0===t.positionWayPoints.length,onClick:function(){return n((function(e){return Object.assign({},e,{controlMode:"pid"})}))}},"Track waypoints!"),i.createElement("button",{className:"bg-red-300 text-black px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-blue-400 hover:ring hover:ring-red-400 disabled:cursor-not-allowed",onClick:function(){return n((function(e){return Object.assign({},e,{positionWayPoints:[]})}))}},"Clear Waypoints!"))),i.createElement("div",{className:"flex justify-center items-center"},i.createElement("div",{className:"cursor-pointer p-6 mb-20 lg:mb-0",ref:s,style:{width:t.canvasWidth,height:t.canvasHeight}})))}var P=n(5763),N=n.n(P),S=n(9547);function R(e,t,n,a){return function(s){var r=t.canvasWidth,i=t.canvasHeight,l=(s.color(0,255,0),s.color(0,50,255),s.color(255,50,10),new p.Z(a.current.x,a.current.y,a.current.theta,a.current.phi,t.carLength,t.carColor,a,s));l.setSpeed(0);var c=new y.Z(l,t,s);function u(e,t,n){s.push(),s.scale(1,-1),s.textSize(12),s.text(e,t,-n),s.pop()}function h(){var e={x:s.mouseX,y:i-s.mouseY,theta:s.radians(t.selectedCarTheta),index:t.poseWayPoints.length+1,selected:!0},a=t.poseWayPoints.map((function(e){return Object.assign({},e,{selected:!1})}));n((function(t){return Object.assign({},t,{poseWayPoints:[].concat((0,o.Z)(a),[e])})}))}e&&e.paths&&c.setPaths(e.paths),s.setup=function(){var e=s.createCanvas(r,i);s.translate(0,i),s.scale(1,-1),s.background(100),e.mousePressed(h)},s.draw=function(){s.background(100),s.translate(0,i),s.scale(1,-1),t.positionWayPoints.forEach((function(e){s.circle(e.x,e.y,.5*t.carLength),u(e.index,e.x-.05*t.carLength,e.y-.01*t.carLength)})),t.poseWayPoints.forEach((function(e){new p.Z(e.x,e.y,e.theta,0,t.carLength,"green",null,s).display(),u(e.index,e.x,e.y),e.selected&&(s.noFill(),s.stroke(255,240,254),s.strokeWeight(1),s.circle(e.x,e.y,t.carLength+5))})),e&&e.paths&&!c.reachedGoal&&"dubins"==t.controlMode?c.step():l.run(),c.reachedGoal&&n((function(e){return Object.assign({},e,{controlMode:null})}))},s.keyPressed=function(){s.keyCode===s.UP_ARROW||"w"===s.key?l.setSpeed(l.speed+1):s.keyCode===s.DOWN_ARROW||"s"===s.key?l.setSpeed(l.speed-1):s.keyCode===s.LEFT_ARROW||"a"===s.key?l.steer(l.phi+.5):s.keyCode===s.RIGHT_ARROW||"d"===s.key?l.steer(l.phi-.5):"t"===s.key&&(l.shouldDrawImpossibleRegion=!l.shouldDrawImpossibleRegion)}}}var W={waypoints:[],controls:[]},j={carLength:44,carSpeed:1,carColor:"#ff0000",selectedCarTheta:0,poseWayPoints:[],positionWayPoints:[],canvasWidth:600,canvasHeight:600,controlMode:null};var O=function(){var e=(0,i.useState)(W),t=e[0],n=e[1],s=(0,i.useState)(j),l=s[0],u=s[1],h=(0,i.useState)(!1),d=h[0],p=h[1],f=g(),x=(0,i.useRef)(),v=(0,i.useRef)({x:l.canvasWidth/4,y:l.canvasHeight/4,theta:0,phi:0});function b(){return(b=(0,a.Z)(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return p(!0),"https://serene-coast-64325.herokuapp.com/dubins_path",t=Object.assign({carLength:l.carLength,carSpeed:l.carSpeed,targetPoses:[{x:v.current.x,y:v.current.y,theta:v.current.theta}].concat((0,o.Z)(l.poseWayPoints))},v.current),e.next=7,c().post("https://serene-coast-64325.herokuapp.com/dubins_path",t);case 7:a=e.sent,p(!1),n(a.data),u((function(e){return Object.assign({},e,{positionWayPoints:a.data.waypoints,controlMode:"null"})}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){var e=f.width,t=f.height;u((function(n){return Object.assign({},n,{canvasWidth:e,canvasHeight:t})}))}),[f]),(0,i.useEffect)((function(){var e=new(m())(R(t,l,u,v),x.current);return function(){return e.remove()}}),[t,l]),i.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2"},i.createElement("div",{className:" flex flex-col items-center"},i.createElement("div",{className:"flex flex-col"},i.createElement("div",null,i.createElement("h1",{className:"text-5xl font-bold text-gray-800 p-6"},"Optimal Controls")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},i.createElement("span",{className:"font-bold underline"},"Click on the screen")," ","to set target points, and use the slider to change the orientation of each target.")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},"Optimal controls enables perfect tracking of points, with both location and orientation! When you've set the points you want, click the"," ",i.createElement("span",{className:"font-bold underline"}," ","Calculate Dubin's Path"," ")," ","button, and then the"," ",i.createElement("span",{className:"font-bold underline"}," ","Run Dubin's Path"," ")," ","button!"))),i.createElement("div",{className:"flex flex-col items-center justify-center text-black"},i.createElement("div",{className:"flex flex-col items-center justify-center text-lg"},i.createElement("h1",{className:"text-3xl font-bold"},"Customize your waypoints!"),i.createElement("h3",null,"Set the orientation of your waypoint:"," ",l.selectedCarTheta),i.createElement(S.Z,{value:l.selectedCarTheta,setValue:function(e){var t=l.poseWayPoints.map((function(t){return t.selected?Object.assign({},t,{theta:e*Math.PI/180}):Object.assign({},t)}));u((function(n){return Object.assign({},n,{selectedCarTheta:e,poseWayPoints:t})}))},min:0,max:360,step:1,color:"blue"})),i.createElement("div",{className:"flex justify-center items-center space-x-3"},i.createElement("button",{className:"bg-blue-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-blue-400 hover:ring hover:ring-blue-400 disabled:cursor-not-allowed",onClick:function(){return function(){return b.apply(this,arguments)}()},disabled:d||l.poseWayPoints.length<1},"Calculate Dubins Path!"),i.createElement("button",{className:"bg-blue-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-blue-400 hover:ring hover:ring-blue-400 disabled:cursor-not-allowed",onClick:function(){u((function(e){return Object.assign({},e,{controlMode:"dubins"})}))},disabled:d||l.poseWayPoints.length<1},"Run Dubins Path!"),i.createElement("button",{className:"bg-red-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-red-400 hover:ring hover:ring-red-400",onClick:function(){u(Object.assign({},l,{poseWayPoints:[],positionWayPoints:[],hasControlInputs:!1})),n((function(e){return Object.assign({},e,{waypoints:null,paths:null})}))}},"Clear Waypoints (X)")))),i.createElement("div",{className:"flex flex-col text-gray-800 justify-center items-center"},d?i.createElement("div",{className:"flex items-center justify-center space-x-3"},i.createElement("p",null,'"Waiting for backend to deliver results!"'),i.createElement(N(),{type:"spinningBubbles",color:"blue",width:"24px",height:"24px"})):"",i.createElement("div",{className:"p-6 mb-20 lg:mb-0",ref:x,style:{width:l.canvasWidth,height:l.canvasHeight}})))},_=[{id:1,value:"Bang Bang",unavailable:!1},{id:2,value:"Optimal Control",unavailable:!1},{id:3,value:"PID",unavailable:!1}];function C(){var e=(0,i.useState)("Bang Bang"),t=e[0],n=e[1];return i.createElement("div",{className:"flex flex-col items-center"},i.createElement("h1",{className:"text-xs lg:text-xl text-gray-800 font-bold p-2"},"Select a Control Algorithm!"),i.createElement(b.Z,{options:_,updateParentSelection:n}),{"Bang Bang":i.createElement(w,null),PID:i.createElement("h1",null,"PID"),"Optimal Control":i.createElement(O,null)}[t.value])}function I(e,t,n,a,s){return function(r){var i=t.canvasWidth,l=t.canvasHeight,c=r.color(0,255,0),u=r.color(0,50,255),h=r.color(255,50,10),d=0,m=!1,p=[];if(e&&e.points)for(var f=e.points[e.targetNodeIndex];f;)p.push(f),f=e.points[f.parentIndex];var g=p.length-1;function x(){switch(a.value){case"Circle":var e={shape:"circle",x:r.mouseX,y:r.mouseY,r:t.circle.radius};n((function(t){return Object.assign({},t,{obstacles:[].concat((0,o.Z)(t.obstacles),[e])})}));break;case"Rectangle":var s={shape:"rectangle",x:r.mouseX,y:r.mouseY,w:t.rectangle.width,h:t.rectangle.height};n((function(e){return Object.assign({},e,{obstacles:[].concat((0,o.Z)(e.obstacles),[s])})}));break;case"Start Node":n((function(e){return Object.assign({},e,{startPoint:Object.assign({},e.startPoint,{x:r.mouseX,y:r.mouseY})})}));break;case"Goal Node":n((function(e){return Object.assign({},e,{goalPoint:Object.assign({},e.goalPoint,{x:r.mouseX,y:r.mouseY})})}));break;default:return}}r.setup=function(){r.createCanvas(i,l).mousePressed(x),r.background("#747474"),t&&function(){r.stroke(c),r.fill(c);var e=t.startPoint,n=e.x,a=e.y,s=e.radius,i=t.goalPoint,l=i.x,o=i.y,h=i.radius;r.circle(n,a,2*s),r.noStroke(),r.fill(u),r.circle(l,o,2*h)}(),e&&(s||function(){r.stroke(u),r.strokeWeight(2),e.points.forEach((function(t){var n=t.x,a=t.y;if(r.fill(c),r.circle(n,a,3),-1!==t.parentIndex){var s=e.points[t.parentIndex],i=s.x,l=s.y;r.line(n,a,i,l)}}));var t=e.points[e.targetNodeIndex];for(r.stroke(c),r.strokeWeight(3);-1!==t.parentIndex;){var n=e.points[t.parentIndex],a=n.x,s=n.y;r.line(t.x,t.y,a,s),t=e.points[t.parentIndex]}}()),r.stroke(h),r.fill(h),t.obstacles.forEach((function(e){switch(e.shape){case"rectangle":r.rect(e.x,e.y,e.w,e.h);break;case"circle":r.circle(e.x,e.y,2*e.r)}}))},r.draw=function(){s&&e&&t&&(function(){r.stroke(u),r.strokeWeight(2);var t=e.points[d];if(r.fill(c),r.circle(t.x,t.y,3),-1!==t.parentIndex){var n=e.points[t.parentIndex];r.line(t.x,t.y,n.x,n.y)}d<e.points.length-1?d++:m=!0}(),function(){if(m){var e=p[g];r.stroke(c),r.strokeWeight(3);var t=p[g-1];r.line(e.x,e.y,t.x,t.y),g>1&&g--}}())}}}n(161);function D(e){var t={};return t.start=[e.startPoint.x,e.startPoint.y],t.goal=[e.goalPoint.x,e.goalPoint.y],t.goalRadius=e.goalPoint.radius,t.width=e.canvasWidth,t.height=e.canvasHeight,t.step_size=e.stepSize,t.obstacles=e.obstacles.map((function(e){switch(e.shape){case"rectangle":var t=e.x,n=e.y,a=t+e.w,s=n+e.h;return{shape:e.shape,definition:[t,n,a,s]};case"circle":return{shape:e.shape,definition:[e.x,e.y,e.r]};default:return null}})),t}function V(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",{className:"flex flex-col justify-center items-center"},i.createElement("p",null,"The Start Node Radius is: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function Z(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",null,i.createElement("p",null,"The Goal Area Radius is: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function T(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",null,i.createElement("p",null,"Set the radius of the circle obstacles: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function H(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",null,i.createElement("p",null,"Set the max step size for the RRT algorithm: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function L(e){var t=e.width,n=e.height,a=e.setWidth,s=e.setHeight,r=e.min,l=e.max,c=e.step,o=e.color;return i.createElement("div",null,i.createElement("h3",{className:"text-lg font-bold"},"Set the Dimensions of the Rectangular Obstacles"),i.createElement("p",null,"Set the Width: ",t),i.createElement(S.Z,{value:t,setValue:a,min:r,max:l,step:c,color:o}),i.createElement("p",null,"Set the Height: ",n),i.createElement(S.Z,{value:n,setValue:s,min:r,max:l,step:c,color:o}))}var z=[{id:1,value:"Start Node",unavailable:!1},{id:2,value:"Goal Node",unavailable:!1},{id:3,value:"Rectangle",unavailable:!1},{id:4,value:"Circle",unavailable:!1},{id:5,value:"Step Size",unavailable:!1}],A={obstacles:[],startPoint:{x:100,y:100,radius:15,minRadius:1,maxRadius:100,step:1},goalPoint:{x:300,y:100,radius:30,minRadius:1,maxRadius:100,step:1},stepSize:15,circle:{radius:20,minRadius:1,maxRadius:100,step:1},rectangle:{height:20,width:20,minLength:1,maxLength:100,step:1},canvasWidth:600,canvasHeight:600};function M(){var e=(0,i.useState)(null),t=e[0],n=e[1],s=(0,i.useState)(A),l=s[0],o=s[1],u=(0,i.useState)("circle"),h=u[0],d=u[1],p=(0,i.useState)(!1),f=p[0],x=p[1],v=(0,i.useState)(!0),y=v[0],E=v[1],k=g(),w=(0,i.useRef)();function P(){return(P=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return x(!0),"https://serene-coast-64325.herokuapp.com/bfs",e.next=6,c().post("https://serene-coast-64325.herokuapp.com/bfs",D(l));case 6:t=e.sent,x(!1),E(!0),n(t.data);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){var e=k.width,t=k.height;o((function(n){return Object.assign({},n,{canvasWidth:e,canvasHeight:t})}))}),[k]),(0,i.useEffect)((function(){var e=new(m())(I(t,l,o,h,y),w.current);return E(!1),function(){e.remove()}}),[t,l,h]),i.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 text-black"},i.createElement("div",{className:"text-black flex flex-col items-center"},i.createElement("div",{className:"p-4"},i.createElement("div",null,i.createElement("h1",{className:"text-5xl font-bold text-gray-800 p-6"},"Breadth First Search")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},"Use the drop down menu and slider below to select things to place, and then"," ",i.createElement("span",{className:"font-bold underline"},"click on the screen")," ","to place them!")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},"Once you've placed a start node and end node, and any obstacles you'd like, then generate the map!"))),i.createElement(b.Z,{options:z,updateParentSelection:d}),i.createElement("div",{className:"flex justify-center items-center space-x-3"},i.createElement("button",{className:"bg-blue-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-blue-400 hover:ring hover:ring-blue-400 disabled:cursor-not-allowed",onClick:function(){return function(){return P.apply(this,arguments)}()},disabled:f},"Generate the Map!"),i.createElement("button",{className:"bg-red-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-red-400 hover:ring hover:ring-red-400",onClick:function(){return o(Object.assign({},l,{obstacles:[]}))}},"Clear Obstacles (X)")),i.createElement("div",{className:"flex flex-col"},{"Start Node":i.createElement(V,{value:l.startPoint.radius,setValue:function(e){o((function(t){return Object.assign({},t,{startPoint:Object.assign({},t.startPoint,{radius:e})})}))},min:l.startPoint.minRadius,max:l.startPoint.maxRadius,step:l.startPoint.step,color:"#0079D9"}),"Goal Node":i.createElement(Z,{value:l.goalPoint.radius,setValue:function(e){o((function(t){return Object.assign({},t,{goalPoint:Object.assign({},t.goalPoint,{radius:e})})}))},min:l.goalPoint.minRadius,max:l.goalPoint.maxRadius,step:l.goalPoint.step,color:"#0079D9"}),Rectangle:i.createElement(L,{width:l.rectangle.width,height:l.rectangle.height,setWidth:function(e){o((function(t){return Object.assign({},t,{rectangle:Object.assign({},t.rectangle,{width:e})})}))},setHeight:function(e){o((function(t){return Object.assign({},t,{rectangle:Object.assign({},t.rectangle,{height:e})})}))},min:l.rectangle.minLength,max:l.rectangle.maxLength,step:l.rectangle.step,color:"#0079D9"}),Circle:i.createElement(T,{value:l.circle.radius,setValue:function(e){o((function(t){return Object.assign({},t,{circle:Object.assign({},t.circle,{radius:e})})}))},min:l.circle.minRadius,max:l.circle.maxRadius,step:l.circle.step,color:"#0079D9"}),"Step Size":i.createElement(H,{value:l.stepSize,setValue:function(e){o((function(t){return Object.assign({},t,{stepSize:e})}))},min:10,max:100,step:1,color:"#0079D9"})}[h.value])),i.createElement("div",{className:"flex flex-col justify-center text-center items-center"},i.createElement("div",null,f?i.createElement("div",{className:"flex items-center justify-center space-x-3"},i.createElement("p",null,'"Waiting for backend to deliver results!"'),i.createElement(N(),{type:"spinningBubbles",color:"blue",width:"24px",height:"24px"})):""),i.createElement("div",{className:"flex justify-center items-center"},i.createElement("div",{className:"cursor-pointer p-6 mb-20 lg:mb-0",style:{height:l.canvasHeight+"px",width:l.canvasWidth+"px"},ref:w}))))}function G(e,t,n,a,s){return function(r){var i=t.canvasWidth,l=t.canvasHeight,c=r.color(0,255,0),u=r.color(0,50,255),h=r.color(255,50,10),d=0,m=!1,p=[];if(e)for(var f=e.points[e.targetNodeIndex];f;)p.push(f),f=e.points[f.parentIndex];var g=p.length-1;function x(){switch(a.value){case"Circle":var e={shape:"circle",x:r.mouseX,y:r.mouseY,r:t.circle.radius};n((function(t){return Object.assign({},t,{obstacles:[].concat((0,o.Z)(t.obstacles),[e])})}));break;case"Rectangle":var s={shape:"rectangle",x:r.mouseX,y:r.mouseY,w:t.rectangle.width,h:t.rectangle.height};n((function(e){return Object.assign({},e,{obstacles:[].concat((0,o.Z)(e.obstacles),[s])})}));break;case"Start Node":n((function(e){return Object.assign({},e,{startPoint:Object.assign({},e.startPoint,{x:r.mouseX,y:r.mouseY})})}));break;case"Goal Node":n((function(e){return Object.assign({},e,{goalPoint:Object.assign({},e.goalPoint,{x:r.mouseX,y:r.mouseY})})}));break;default:return}}r.setup=function(){r.createCanvas(i,l).mousePressed(x),r.background("#747474"),t&&function(){r.stroke(c),r.fill(c);var e=t.startPoint,n=e.x,a=e.y,s=e.radius,i=t.goalPoint,l=i.x,o=i.y,h=i.radius;r.circle(n,a,2*s),r.noStroke(),r.fill(u),r.circle(l,o,2*h)}(),e&&(s||function(){r.stroke(u),r.strokeWeight(2),e.points.forEach((function(t){var n=t.x,a=t.y;if(r.fill(c),r.circle(n,a,3),-1!==t.parentIndex){var s=e.points[t.parentIndex],i=s.x,l=s.y;r.line(n,a,i,l)}}));var t=e.points[e.targetNodeIndex];for(r.stroke(c),r.strokeWeight(3);-1!==t.parentIndex;){var n=e.points[t.parentIndex],a=n.x,s=n.y;r.line(t.x,t.y,a,s),t=e.points[t.parentIndex]}}()),r.stroke(h),r.fill(h),t.obstacles.forEach((function(e){switch(e.shape){case"rectangle":r.rect(e.x,e.y,e.w,e.h);break;case"circle":r.circle(e.x,e.y,2*e.r)}}))},r.draw=function(){s&&e&&t&&(function(){r.stroke(u),r.strokeWeight(2);var t=e.points[d];if(r.fill(c),r.circle(t.x,t.y,3),-1!==t.parentIndex){var n=e.points[t.parentIndex];r.line(t.x,t.y,n.x,n.y)}d<e.points.length-1?d++:m=!0}(),function(){if(m){var e=p[g];r.stroke(c),r.strokeWeight(3);var t=p[g-1];r.line(e.x,e.y,t.x,t.y),g>1&&g--}}())}}}function B(e){var t={};return t.start=[e.startPoint.x,e.startPoint.y],t.goal=[e.goalPoint.x,e.goalPoint.y],t.goalRadius=e.goalPoint.radius,t.width=e.canvasWidth,t.height=e.canvasHeight,t.d_max=e.stepSize,t.obstacles=e.obstacles.map((function(e){switch(e.shape){case"rectangle":var t=e.x,n=e.y,a=t+e.w,s=n+e.h;return{shape:e.shape,definition:[t,n,a,s]};case"circle":return{shape:e.shape,definition:[e.x,e.y,e.r]};default:return null}})),t}function X(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",{className:"flex flex-col justify-center items-center"},i.createElement("p",null,"The Start Node Radius is: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function F(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",{className:"flex flex-col justify-center items-center"},i.createElement("p",null,"The Goal Area Radius is: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function Y(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",{className:"flex flex-col justify-center items-center"},i.createElement("p",null,"Set the radius of the circle obstacles: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function U(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",{className:"flex flex-col justify-center items-center"},i.createElement("p",null,"Set the max step size for the RRT algorithm: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function q(e){var t=e.width,n=e.height,a=e.setWidth,s=e.setHeight,r=e.min,l=e.max,c=e.step,o=e.color;return i.createElement("div",{className:"flex flex-col justify-center items-center"},i.createElement("h3",{className:"text-lg font-bold"},"Set the Dimensions of the Rectangular Obstacles"),i.createElement("p",null,"Set the Width: ",t),i.createElement(S.Z,{value:t,setValue:a,min:r,max:l,step:c,color:o}),i.createElement("p",null,"Set the Height: ",n),i.createElement(S.Z,{value:n,setValue:s,min:r,max:l,step:c,color:o}))}var J=[{id:1,value:"Start Node",unavailable:!1},{id:2,value:"Goal Node",unavailable:!1},{id:3,value:"Rectangle",unavailable:!1},{id:4,value:"Circle",unavailable:!1},{id:5,value:"Step Size",unavailable:!1}],K={obstacles:[],startPoint:{x:100,y:100,radius:15,minRadius:1,maxRadius:100,step:1},goalPoint:{x:300,y:100,radius:30,minRadius:1,maxRadius:100,step:1},stepSize:15,circle:{radius:20,minRadius:1,maxRadius:100,step:1},rectangle:{height:20,width:20,minLength:1,maxLength:100,step:1},canvasWidth:600,canvasHeight:600};function Q(){var e=(0,i.useState)(null),t=e[0],n=e[1],s=(0,i.useState)(K),l=s[0],o=s[1],u=(0,i.useState)("circle"),h=u[0],d=u[1],p=(0,i.useState)(!1),f=p[0],x=p[1],v=(0,i.useState)(!0),y=v[0],E=v[1],k=g(),w=(0,i.useRef)();function P(){return(P=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return x(!0),"https://serene-coast-64325.herokuapp.com/rrt",e.next=6,c().post("https://serene-coast-64325.herokuapp.com/rrt",B(l));case 6:t=e.sent,x(!1),E(!0),n(t.data);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){var e=k.width,t=k.height;o((function(n){return Object.assign({},n,{canvasWidth:e,canvasHeight:t})}))}),[k]),(0,i.useEffect)((function(){var e=new(m())(G(t,l,o,h,y),w.current);return E(!1),function(){e.remove()}}),[t,l,h]),i.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 text-black"},i.createElement("div",{className:"text-black flex flex-col items-center"},i.createElement("div",{className:"flex flex-col"},i.createElement("div",null,i.createElement("h1",{className:"text-5xl font-bold text-gray-800 p-6"},"Rapidly Exploring Random Trees")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},"Use the drop down menu and slider below to select things to place, and then"," ",i.createElement("span",{className:"font-bold underline"},"click on the screen")," ","to place them!")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},"Once you've placed a start node and end node, and any obstacles you'd like, generate the map!")),i.createElement("div",{className:"flex flex-col"},{"Start Node":i.createElement(X,{value:l.startPoint.radius,setValue:function(e){o((function(t){return Object.assign({},t,{startPoint:Object.assign({},t.startPoint,{radius:e})})}))},min:l.startPoint.minRadius,max:l.startPoint.maxRadius,step:l.startPoint.step,color:"#0079D9"}),"Goal Node":i.createElement(F,{value:l.goalPoint.radius,setValue:function(e){o((function(t){return Object.assign({},t,{goalPoint:Object.assign({},t.goalPoint,{radius:e})})}))},min:l.goalPoint.minRadius,max:l.goalPoint.maxRadius,step:l.goalPoint.step,color:"#0079D9"}),Rectangle:i.createElement(q,{width:l.rectangle.width,height:l.rectangle.height,setWidth:function(e){o((function(t){return Object.assign({},t,{rectangle:Object.assign({},t.rectangle,{width:e})})}))},setHeight:function(e){o((function(t){return Object.assign({},t,{rectangle:Object.assign({},t.rectangle,{height:e})})}))},min:l.rectangle.minLength,max:l.rectangle.maxLength,step:l.rectangle.step,color:"#0079D9"}),Circle:i.createElement(Y,{value:l.circle.radius,setValue:function(e){o((function(t){return Object.assign({},t,{circle:Object.assign({},t.circle,{radius:e})})}))},min:l.circle.minRadius,max:l.circle.maxRadius,step:l.circle.step,color:"#0079D9"}),"Step Size":i.createElement(U,{value:l.stepSize,setValue:function(e){o((function(t){return Object.assign({},t,{stepSize:e})}))},min:10,max:100,step:1,color:"#0079D9"})}[h.value])),i.createElement(b.Z,{options:J,updateParentSelection:d}),i.createElement("div",{className:"flex justify-center items-center space-x-3"},i.createElement("button",{className:"bg-blue-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-blue-400 hover:ring hover:ring-blue-400 disabled:cursor-not-allowed",onClick:function(){return function(){return P.apply(this,arguments)}()},disabled:f},"Generate Map!"),i.createElement("button",{className:"bg-red-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-red-400 hover:ring hover:ring-red-400",onClick:function(){return o(Object.assign({},l,{obstacles:[]}))}},"Clear Obstacles (X)"))),i.createElement("div",{className:"flex flex-col justify-center text-center items-center"},i.createElement("div",null,f?i.createElement("div",{className:"flex items-center justify-center space-x-3"},i.createElement("p",null,'"Waiting for backend to deliver results!"'),i.createElement(N(),{type:"spinningBubbles",color:"blue",width:"24px",height:"24px"})):""),i.createElement("div",{className:"flex justify-center items-center"},i.createElement("div",{className:"cursor-pointer p-6 mb-20 lg:mb-0",style:{height:l.canvasHeight+"px",width:l.canvasWidth+"px"},ref:w}))))}var $=[{id:1,value:"RRT",unavailable:!1},{id:3,value:"BFS",unavailable:!1},{id:2,value:"RRT *",unavailable:!1}];function ee(){var e=(0,i.useState)("RRT"),t=e[0],n=e[1];return i.createElement("div",{className:"flex flex-col items-center text-gray-800"},i.createElement("p",{className:"text-xs lg:text-xl text-gray-800 font-bold p-2"},"Select a Mapping Algorithm!"),i.createElement(b.Z,{options:$,updateParentSelection:n}),{RRT:i.createElement(Q,null),BFS:i.createElement(M,null),"RRT *":i.createElement("h1",null,"RRT *")}[t.value])}function te(e,t,n,a,s,r,i){return function(l){var c=t.canvasWidth,u=t.canvasHeight,h=l.color(0,255,0),d=l.color(0,50,255),m=l.color(255,50,10),f=0,g=!1,x=[];if(e)for(var v=e.points[e.targetNodeIndex];v;)x.push(v),v=e.points[v.parentIndex];var b=x.length-1,E=new p.Z(i.current.x,i.current.y,i.current.theta,i.current.phi,t.carLength,t.carColor,i,l);E.setSpeed(0);var k=new y.Z(E,t,l);function w(){l.stroke(d),l.strokeWeight(2),e.points.forEach((function(t){var n=t.x,a=t.y;if(l.fill(h),l.circle(n,a,3),-1!==t.parentIndex){var s=e.points[t.parentIndex],r=s.x,i=s.y;l.line(n,a,r,i)}}));var t=e.points[e.targetNodeIndex];for(l.stroke(h),l.strokeWeight(3);-1!==t.parentIndex;){var n=e.points[t.parentIndex],a=n.x,s=n.y;l.line(t.x,t.y,a,s),t=e.points[t.parentIndex]}}function P(){l.stroke(m),l.fill(m),t.obstacles.forEach((function(e){switch(e.shape){case"rectangle":l.rect(e.x,e.y,e.w,e.h);break;case"circle":l.circle(e.x,e.y,2*e.r)}}))}function N(){l.stroke(h),l.fill(h);var e=t.startPoint,n=e.x,a=e.y,s=e.radius,r=t.goalPoint,i=r.x,c=r.y,o=r.radius;l.circle(n,a,2*s),l.noStroke(),l.fill(d),l.circle(i,c,2*o)}function S(){switch(a.value){case"Circle":var e={shape:"circle",x:l.mouseX,y:l.mouseY,r:t.circle.radius};n((function(t){return Object.assign({},t,{obstacles:[].concat((0,o.Z)(t.obstacles),[e])})}));break;case"Rectangle":var s={shape:"rectangle",x:l.mouseX,y:l.mouseY,w:t.rectangle.width,h:t.rectangle.height};n((function(e){return Object.assign({},e,{obstacles:[].concat((0,o.Z)(e.obstacles),[s])})}));break;case"Start Node":n((function(e){return Object.assign({},e,{startPoint:Object.assign({},e.startPoint,{x:l.mouseX,y:l.mouseY})})})),i.current.x=l.mouseX,i.current.y=l.mouseY;break;case"Goal Node":n((function(e){return Object.assign({},e,{goalPoint:Object.assign({},e.goalPoint,{x:l.mouseX,y:l.mouseY})})}));break;default:return}}var R=x.reverse();l.setup=function(){l.createCanvas(c,u).mousePressed(S),l.background("#747474"),t&&(N(),E.run()),e&&2==s&&w(),P()},l.draw=function(){2!=s&&(0==s&&e&&t&&(!function(){l.stroke(d),l.strokeWeight(2);var t=e.points[f];if(l.fill(h),l.circle(t.x,t.y,3),-1!==t.parentIndex){var n=e.points[t.parentIndex];l.line(t.x,t.y,n.x,n.y)}f<e.points.length-1?f++:g=!0}(),function(){if(g){var e=x[b];l.stroke(h),l.strokeWeight(3);var t=x[b-1];l.line(e.x,e.y,t.x,t.y),b>1?b--:r(1)}}(),E.run()),1==s&&e&&t&&(l.background("#747474"),P(),N(),w(),k.pidTrackPositionWayPoints(R)),k.reachedGoal&&r(2))}}}function ne(e){var t={};return t.start=[e.startPoint.x,e.startPoint.y],t.goal=[e.goalPoint.x,e.goalPoint.y],t.goalRadius=e.goalPoint.radius,t.width=e.canvasWidth,t.height=e.canvasHeight,t.d_max=e.stepSize,t.obstacles=e.obstacles.map((function(e){switch(e.shape){case"rectangle":var t=e.x,n=e.y,a=t+e.w,s=n+e.h;return{shape:e.shape,definition:[t,n,a,s]};case"circle":return{shape:e.shape,definition:[e.x,e.y,e.r]};default:return null}})),t}function ae(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",{className:"flex flex-col justify-center items-center"},i.createElement("p",null,"The Start Node Radius is: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function se(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",null,i.createElement("p",null,"The Goal Area Radius is: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function re(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",null,i.createElement("p",null,"Set the radius of the circle obstacles: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function ie(e){var t=e.value,n=e.setValue,a=e.min,s=e.max,r=e.step,l=e.color;return i.createElement("div",null,i.createElement("p",null,"Set the max step size for the RRT algorithm: ",t),i.createElement(S.Z,{value:t,setValue:n,min:a,max:s,step:r,color:l}))}function le(e){var t=e.width,n=e.height,a=e.setWidth,s=e.setHeight,r=e.min,l=e.max,c=e.step,o=e.color;return i.createElement("div",null,i.createElement("h3",{className:"text-lg font-bold"},"Set the Dimensions of the Rectangular Obstacles"),i.createElement("p",null,"Set the Width: ",t),i.createElement(S.Z,{value:t,setValue:a,min:r,max:l,step:c,color:o}),i.createElement("p",null,"Set the Height: ",n),i.createElement(S.Z,{value:n,setValue:s,min:r,max:l,step:c,color:o}))}var ce=[{id:1,value:"Start Node",unavailable:!1},{id:2,value:"Goal Node",unavailable:!1},{id:3,value:"Rectangle",unavailable:!1},{id:4,value:"Circle",unavailable:!1},{id:5,value:"Step Size",unavailable:!1}],oe={carLength:10,carSpeed:1,carColor:"#ff0000",obstacles:[],startPoint:{x:100,y:100,radius:15,minRadius:1,maxRadius:100,step:1},goalPoint:{x:300,y:100,radius:30,minRadius:1,maxRadius:100,step:1},stepSize:40,circle:{radius:40,minRadius:1,maxRadius:100,step:1},rectangle:{height:40,width:40,minLength:1,maxLength:100,step:1},canvasWidth:600,canvasHeight:600};function ue(){var e=(0,i.useState)(null),t=e[0],n=e[1],s=(0,i.useState)(oe),l=s[0],o=s[1],u=(0,i.useState)("circle"),h=u[0],d=u[1],p=(0,i.useState)(!1),f=p[0],x=p[1],v=(0,i.useState)(0),y=v[0],E=v[1],k=g(),w=(0,i.useRef)(),P=(0,i.useRef)({x:l.startPoint.x,y:l.startPoint.y,theta:0,phi:0});function S(){return(S=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(0),!f){e.next=3;break}return e.abrupt("return");case 3:return x(!0),"https://serene-coast-64325.herokuapp.com/rrt",e.next=7,c().post("https://serene-coast-64325.herokuapp.com/rrt",ne(l));case 7:t=e.sent,x(!1),n(t.data);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){var e=k.width,t=k.height;o((function(n){return Object.assign({},n,{canvasWidth:e,canvasHeight:t})}))}),[k]),(0,i.useEffect)((function(){var e=new(m())(te(t,l,o,h,y,E,P),w.current);return function(){e.remove()}}),[t,l,h,y]),i.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 text-black"},i.createElement("div",{className:"text-black flex flex-col items-center"},i.createElement("div",{className:"p-4"},i.createElement("div",{className:"flex flex-col"},i.createElement("div",null,i.createElement("h1",{className:"text-5xl font-bold text-gray-800 p-6"},"Bang Bang + RRT")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},i.createElement("span",{className:"font-bold underline"},"Click on the screen")," to define the start, end, and obstacles on the map by (also using the drop down and slider below).  ")),i.createElement("div",null,i.createElement("h2",{className:"text-l text-gray-800 p-6"},"Now we can combine mapping and control alogirhtms - so the car really can find its own way from start to finish!")))),i.createElement(b.Z,{options:ce,updateParentSelection:d}),i.createElement("div",{className:"flex justify-center items-center space-x-3"},i.createElement("button",{className:"bg-blue-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-blue-400 hover:ring hover:ring-blue-400 disabled:cursor-not-allowed",onClick:function(){return function(){return S.apply(this,arguments)}()},disabled:f},"Generate the Map and Autonomously Drive the Car!!"),i.createElement("button",{className:"bg-red-300 px-3 py-2 m-3 rounded-md focus:outline-none focus:ring focus:ring-red-400 hover:ring hover:ring-red-400",onClick:function(){o(Object.assign({},l,{obstacles:[]})),E(2)}},"Clear Obstacles (X)")),i.createElement("div",{className:"flex flex-col"},{"Start Node":i.createElement(ae,{value:l.startPoint.radius,setValue:function(e){o((function(t){return Object.assign({},t,{startPoint:Object.assign({},t.startPoint,{radius:e})})}))},min:l.startPoint.minRadius,max:l.startPoint.maxRadius,step:l.startPoint.step,color:"#0079D9"}),"Goal Node":i.createElement(se,{value:l.goalPoint.radius,setValue:function(e){o((function(t){return Object.assign({},t,{goalPoint:Object.assign({},t.goalPoint,{radius:e})})}))},min:l.goalPoint.minRadius,max:l.goalPoint.maxRadius,step:l.goalPoint.step,color:"#0079D9"}),Rectangle:i.createElement(le,{width:l.rectangle.width,height:l.rectangle.height,setWidth:function(e){o((function(t){return Object.assign({},t,{rectangle:Object.assign({},t.rectangle,{width:e})})}))},setHeight:function(e){o((function(t){return Object.assign({},t,{rectangle:Object.assign({},t.rectangle,{height:e})})}))},min:l.rectangle.minLength,max:l.rectangle.maxLength,step:l.rectangle.step,color:"#0079D9"}),Circle:i.createElement(re,{value:l.circle.radius,setValue:function(e){o((function(t){return Object.assign({},t,{circle:Object.assign({},t.circle,{radius:e})})}))},min:l.circle.minRadius,max:l.circle.maxRadius,step:l.circle.step,color:"#0079D9"}),"Step Size":i.createElement(ie,{value:l.stepSize,setValue:function(e){o((function(t){return Object.assign({},t,{stepSize:e})}))},min:10,max:100,step:1,color:"#0079D9"})}[h.value])),i.createElement("div",{className:"flex flex-col justify-center text-center items-center"},i.createElement("div",null,f?i.createElement("div",{className:"flex items-center justify-center space-x-3"},i.createElement("p",null,'"Waiting for backend to deliver results!"'),i.createElement(N(),{type:"spinningBubbles",color:"blue",width:"24px",height:"24px"})):""),i.createElement("div",{className:"flex justify-center items-center"},i.createElement("div",{className:"cursor-pointer p-6 mb-20 lg:mb-0",style:{height:l.canvasHeight+"px",width:l.canvasWidth+"px"},ref:w}))))}var he=[{id:1,value:"Bang Bang",unavailable:!1},{id:2,value:"Optimal Control",unavailable:!1},{id:3,value:"PID",unavailable:!1}],de=[{id:1,value:"RRT",unavailable:!1},{id:2,value:"RRT *",unavailable:!1},{id:3,value:"BFS",unavailable:!1}];function me(){var e=(0,i.useState)("Bang Bang"),t=e[0],n=e[1],a=(0,i.useState)("RRT"),s=a[0],r=a[1];return i.createElement("div",{className:"flex flex-col items-center text-gray-800"},i.createElement("h1",{className:"text-xs lg:text-xl text-gray-800 font-bold"},"Select a Control and a Mapping Algorithm!"),i.createElement("div",{className:"flex justify-center space-x-4"},i.createElement(b.Z,{options:he,updateParentSelection:n}),i.createElement(b.Z,{options:de,updateParentSelection:r})),{"Bang Bang RRT":i.createElement(ue,null)}[t.value+" "+s.value])}function pe(){return i.createElement("div",{className:"flex flex-col p-6 text-black text-lg items-center justify-center"},i.createElement("h1",{className:"text-2xl p-3 font-bold"},"Find our code in the following four repos!"),i.createElement("ul",{className:"space-y-3"},i.createElement("li",null,i.createElement("a",{target:"_blank",className:"text-blue-600",href:"https://github.com/OfekPeres/controls-visualization"},"Visualization Code (Front End)")),i.createElement("li",null,i.createElement("a",{target:"_blank",className:"text-blue-600",href:"https://github.com/OfekPeres/controls-visualization-backend"},"Server Code (Python Flask Backend)")),i.createElement("li",null,i.createElement("a",{target:"_blank",className:"text-blue-600",href:"https://github.com/OfekPeres/controls-algorithms"},"Control Algorithms")),i.createElement("li",null,i.createElement("a",{target:"_blank",className:"text-blue-600",href:"https://github.com/OfekPeres/MappingAlgorithms"},"Mapping Algorithms"))),i.createElement("h1",{className:"text-2xl p-3 font-bold"},"Live Docs for the Controls and Mapping Algorithms can be found here:"),i.createElement("ul",{className:"space-y-3"},i.createElement("li",null,i.createElement("a",{target:"_blank",className:"text-blue-600",href:"https://ofekperes.github.io/MappingAlgorithms/"},"Mapping Algorithms Docs")),i.createElement("li",null,i.createElement("a",{target:"_blank",className:"text-blue-600",href:"https://ofekperes.github.io/controls-algorithms/"},"Control Algorithms Docs"))),i.createElement("h1",{className:"text-2xl p-3 font-bold"},"System Design Docs + How can this project scale?"),i.createElement("ul",{className:"space-y-3"},i.createElement("li",null,i.createElement("a",{target:"_blank",className:"text-blue-600",href:"https://excalidraw.com/#json=tY5XrZ-6Xfl8tELidP6TA,etXktXFXcCbD3NsUiwdxlA"},"Link to Exalidraw Canvas"))))}var fe={selectedIndex:0,values:[{text:"Tutorial",isSelected:!0},{text:"Control Algorithms",isSelected:!1},{text:"Mapping Algorithms",isSelected:!1},{text:"Mapping & Controls",isSelected:!1},{text:"Documentation",isSelected:!1}]},ge=function(){var e=(0,i.useState)(fe),t=e[0],n=e[1];function s(){return(s=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://serene-coast-64325.herokuapp.com",e.next=3,c().get("https://serene-coast-64325.herokuapp.com");case 3:e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),i.createElement("main",{className:"h-full text-gray-200"},i.createElement("div",{className:"bg-[#747474] text-6xl flex items-center text-center justify-center py-6 mb-6"},"Dubins Car Sandbox"),i.createElement(h,{tabValues:t,setTabValues:n}),i.createElement("div",null,{0:i.createElement(v,null),1:i.createElement(C,null),2:i.createElement(ee,null),3:i.createElement(me,null),4:i.createElement(pe,null)}[t.selectedIndex]))}}}]);
//# sourceMappingURL=component---src-pages-index-jsx-2a1416c7455f09c2f3fd.js.map